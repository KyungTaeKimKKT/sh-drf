{% extends "admin/base_site.html" %}
{% load static %}

{% block content %}
<h1>{{ user.user_mailid }} 비밀번호 변경</h1>

<form method="post" id="password-form" style="max-width:400px;">
  {% csrf_token %}
  <p>
    <label for="id_new_password1">새 비밀번호:</label><br>
    <input type="password" id="id_new_password1" name="new_password1" required>
  </p>
  <p>
    <label for="id_new_password2">확인:</label><br>
    <input type="password" id="id_new_password2" name="new_password2" required>
  </p>

  <input type="submit" value="변경" id="submit-btn" class="default" disabled />
  <a href="../../{{ user.id }}/change/" class="button cancel">취소</a>
</form>

<script>
  const pw1 = document.getElementById('id_new_password1');
  const pw2 = document.getElementById('id_new_password2');
  const btn = document.getElementById('submit-btn');

  function validate() {
    btn.disabled = !(pw1.value && pw2.value && pw1.value === pw2.value);
  }

  pw1.addEventListener('input', validate);
  pw2.addEventListener('input', validate);
</script>
{% endblock %}